// Test output.
void testPrint(const char * const str, ...);

class TestClass (int value) {
	static Create(int value) {
		testPrint("TestClass.Create: Value = %d.", value);
		return @(value);
	}
	
	TestClass implicitCopy() {
		int newValue = @value * 2;
		testPrint("TestClass.implicitCopy: Previous value = %d, New value = %d.", @value, newValue);
		return @(newValue);
	}
	
	int getValue() {
		testPrint("TestClass.getValue: Value = %d.", @value);
		return @value;
	}
}

TestClass& function(TestClass& object) {
	auto& refObject = object;
	
	testPrint("function: Ref value = %d.", refObject.getValue());
	
	auto copyObject = object;
	
	testPrint("function: Copy value = %d.", copyObject.getValue());
	
	return object;
}

// Entry point.
int testEntryPoint(int argc, char ** argv) {
	auto inst = TestClass(44);
	
	testPrint("testEntryPoint: Value = %d.", inst.getValue());
	
	auto& inst2 = function(inst);
	
	testPrint("testEntryPoint: Value = %d.", inst2.getValue());
	
	return 0;
}

